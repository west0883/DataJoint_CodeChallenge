%{
 # FullMovie
 -> slwest382_codechallenge.Recording
 ---
 full_movie: longblob
 %}
classdef FullMovie < dj.Computed
      methods(Access=protected)
        function makeTuples(self,key)

            % Pull out info for this key
            this_data = slwest382_codechallenge.Recording * slwest382_codechallenge.Stimulation & key; 

            % Fetch each needed attribute.
            % [This got an error, because this is a "gen revlar". Maybe I need to fetch the whole thing. 
            %x_block_size = fetch(this_data.x_block_size);
            %y_block_size = fetch(this_data.y_block_size);
            %movie = fetch(this_data.y_block_size);
 
            % Fetch this_data. 
            
            % Calculate full movie;
            key.full_movie = repmat(movie, x_block_size, y_block_size, 1);
     
            % Insert keys.
            self.insert(key);
        end
      end
end